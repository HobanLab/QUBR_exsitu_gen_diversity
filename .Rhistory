TimeAlive = case_when(Outcome == 'Alive' ~ (LastObservedDateM3 - DatePlanted), #calculate TimeAlive as difference between DatePlanted and DateDied
Outcome == 'Dead' ~ (DateDied - DatePlanted),
Outcome == 'Presumed Dead' ~ (DateDied - DatePlanted)),
RatioTimeAlive = (as.numeric(TimeAlive)) / (as.numeric(PotentialTimeAlive)))
#Decide priority sites to visit in Baja based on number of potentially living individuals at each ranch
priority_sites <- seedlings_clean%>%
filter(Outcome == 'Alive')%>%
group_by(PlantedReg, Ranch, N, W)%>%
summarise(n())
#Takes data collected in the field in Nov 2024 and recodes some columns that have irregular (shade, height, etc)
outplanted_seedlings_nov24 <- outplanted_seedlings24.field%>%
#interprets dead individuals with a Height of N/A as a Height_cm of 0
mutate(Height_cm=recode(Height,'N/A' = '0'))%>%
#renames columns to match previous data
mutate(Ranch=recode(Ranch,
'San Dio' = 'Rancho San Dionisio',
'Santo Do' = 'Santo Domingo',
'La Palapa' = 'La Rueda (Palapa)',
'Parque de Santiago' = 'Parque EcolÃ³gico Santiago',
'Santa Gertrudis (orchard)' = 'Santa Gertudris (Huerta)',
'Santa Gertrudis' = 'Santa Gertudris',
'Palo Verdal' = 'Palo Verdad'))%>%
#combines equivalent variables
mutate(Monitor4=recode(Condition, 'the best' = 'Viva','great' = 'Viva', 'good' = 'Viva', 'fair' = 'Viva', 'poor' = 'Viva',
'dead' = 'Muerta'))%>%
mutate(Condition=recode(Condition, 'the best' = 'great'))%>%
mutate(Height=recode(Height, 'above the knee' = 'above knee',
'above shoulders' = 'above shoulder',
'taller than Daniel' = 'taller than Dana',
'1.5 Daniels' = 'taller than Dana',
'2 Daniels' = 'taller than Dana',
'mid hip' = 'hip',
'low hip' = 'below hip'))%>%
mutate(Canopy_cover=recode(`Canopy cover`, 'patial shade' = 'partial shade',
'mostly  sun' = 'mostly sun',
'total sun' = 'full sun'))%>%
#assigns numeric values to continuous variables
mutate(Condition_num=as.factor(recode(Condition,
'dead' = '0',
'poor' = '0.25',
'fair' = '0.5',
'good' = '0.75',
'great' = '1')))%>%
mutate(Canopy_num=recode(Canopy_cover,
'full shade' = '0',
'mostly shade' = '0.25', 'partial sun' = '0.25',
'half shade' = '0.5', 'half sun' = '0.5',
'partial shade' = '0.75', 'mostly sun' = '0.75',
'full sun' = '1'))%>%
mutate(Height_cm=recode(Height,
'N/A' = '0',
'below ankle' = '0-7.5',
'ankle' = '7.5-16.5',
'above ankle' = '16.5-29.5',
'mid shin' = '29.5-39.5',
'below knee' = '39.5-47',
'knee' = '47-57.5',
'above knee' = '57.5-71.5',
'below hip'= '71.5-85',
'hip' = '85-96.5',
'above hip' = '96.5-109.5',
'mid torso' = '109.5-123.5',
'below shoulders' = '123.5-136',
'shoulder' = '136-147',
'above shoulder' = '147-158.5',
'Dana height' = '158.5-171.5',
'taller than Dana' = '>171.5'
))%>%
mutate(Height_lower=recode(Height,
'N/A' = '0',
'below ankle' = '0',
'ankle' = '7.5',
'above ankle' = '16.5',
'mid shin' = '29.5',
'below knee' = '39.5',
'knee' = '47',
'above knee' = '57.5',
'below hip'= '71.5',
'hip' = '85',
'above hip' = '96.5',
'mid torso' = '109.5',
'below shoulders' = '123.5',
'shoulder' = '136',
'above shoulder' = '147',
'Dana height' = '158.5',
'taller than Dana' = '171.5'))%>%
mutate(Height_upper=recode(Height,
'N/A' = '0',
'below ankle' = '7.5',
'ankle' = '16.5',
'above ankle' = '29.5',
'mid shin' = '39.5',
'below knee' = '47',
'knee' = '57.5',
'above knee' = '71.5',
'below hip'= '85',
'hip' = '96.5',
'above hip' = '109.5',
'mid torso' = '123.5',
'below shoulders' = '136',
'shoulder' = '147',
'above shoulder' = '158.5',
'Dana height' = '171.5',
'taller than Dana' = '343'
))%>%
#converts variables into numeric so they can do math
mutate(Canopy_num=as.factor(Canopy_num))%>%
mutate(Height_cm=as.factor(Height_cm))%>%
mutate(MetalTagID = `Metal tag ID`)%>%
mutate(MetalTagID = as.character(MetalTagID)) #Some of the tags have an A/B
#Adding relevant data from most recent monitoring (Nov 2024) to the pre-existing data
seedlings_clean_joined <- outplanted_seedlings_nov24%>%
dplyr::select(Ranch, MetalTagID, Monitor4)%>% #these are the only columns we need to carry over to add the fourth monitoring date and then update survivorship curves
left_join(seedlings_clean, ., by = 'MetalTagID')%>%
#Adding to previous Outcome in seedlings_clean
mutate(Outcome = case_when(Monitor4 == 'Nueva' | Monitor4 == 'Viva' ~ 'Alive',
(Monitor1 == 'Muerta' | Monitor2 == 'Muerta' | Monitor3 == 'Muerta' | Monitor4 == 'Muerta') ~ 'Dead',
is.na(Monitor4) ~ 'Presumed Dead'))%>%
#Adding to previous DateDied in seedlings_clean:
#DateDied is calculated based on last positive observation
mutate(DateDied = case_when((is.na(Monitor1) & is.na(Monitor2) & is.na(Monitor3) & is.na(Monitor4)) | Monitor1 == 'Muerta' ~ DatePlanted,
(Monitor1 == 'Viva' | Monitor1 == 'Nueva') & (Monitor2 == 'Muerta' | is.na(Monitor2)) ~ Monitor1Date,
(Monitor2 == 'Viva' | Monitor2 == 'Nueva') & (Monitor3 == 'Muerta' | is.na(Monitor3)) ~ Monitor2Date,
(Monitor3 == 'Viva' | Monitor3 == 'Nueva') & (Monitor4 == 'Muerta' | is.na(Monitor4)) ~ Monitor3Date))%>%
#If TimeAlive is negative because DatePlanted occurs after DateDied, use DatePlanted; otherwise default to DateDied
mutate(DateDied = case_when(DateDied <= DatePlanted ~ DatePlanted, .default = DateDied))%>%
mutate(PotentialTimeAlive = LastObservedDateM4 - DatePlanted)%>% #days since it was first planted
#TimeAlive is calculated based on outcome and time betweeen DatePlanted &  DateDied
mutate(TimeAlive = case_when(Outcome == 'Alive' ~ (LastObservedDateM4 - DatePlanted),
Outcome == 'Dead' ~ (DateDied - DatePlanted),
Outcome == 'Presumed Dead' ~ (DateDied - DatePlanted)))%>%
mutate(RatioTimeAlive = (as.numeric(TimeAlive)) / (as.numeric(PotentialTimeAlive)))%>%
mutate(LastObservedDateM4 = LastObservedDateM4)
#adds TimeAlive info to our outplanted individuals from Daniel's database
outplanted_seedlings_nov24 <- outplanted_seedlings_nov24%>%
left_join(., dplyr::select(seedlings_clean_joined, c('MetalTagID', 'TimeAlive')), by = 'MetalTagID')%>%
mutate(TimeAliveNum = as.numeric(TimeAlive))
####FOR LOOP: SURVIVORSHIP CURVE####
#creating a df with increments of 1 day to represent how old a seedling could be
max_age <- as.numeric(max(seedlings_clean_joined$TimeAlive, na.rm = TRUE))
df_age <-
data.frame("Days"=seq(0, max_age, 1), "TotalAlive" = NA)
#for loop: how many individuals were still alive at any given duration?
#with Monitor4 added
for (i in 1:nrow(df_age)) {
Day <- df_age$Days[i] #df_age$Days is a vector (one column in this df)
Num_seedlings_alive <- sum(Day <= seedlings_clean_joined$TimeAlive, na.rm = TRUE)
#Day is a temporary object that holds the output of the day we are on in the iterative loop
df_age$TotalAlive[i] <- paste0(Num_seedlings_alive)
#fill one cell per iteration with the total number of seedlings alive by that day
}
#how many seedlings are alive after 1 year?
num_alive_1yr <- seedlings_clean_joined%>%
filter((TimeAlive>=365 & PotentialTimeAlive>=365) | (TimeAlive<365 & RatioTimeAlive==1))%>%
nrow()
#how many seedlings are alive after 2 years?
num_alive_2yr <- seedlings_clean_joined%>%
filter((TimeAlive>=730 & PotentialTimeAlive>=730) | (TimeAlive<730 & RatioTimeAlive==1))%>%
nrow()
#perc alive after 1 year
num_alive_1yr/nrow(seedlings_clean_joined)
#perc of inds alive at 1yr that are also alive at 2yr
num_alive_2yr/num_alive_1yr
#plot survivorship curve
df_age_final <- df_age%>%
mutate(TotalAlive = as.numeric(TotalAlive))%>%
mutate(PercentAlive = TotalAlive/max(TotalAlive, na.rm = TRUE))%>%
mutate(data_type = "all")
df_age_final %>%
ggplot(aes(x = Days, y = PercentAlive)) +
ggtitle("seedlings_clean_joined: all") +
xlab('Days alive') +
ylab('# of individuals') +
ylim(0, 1) +
geom_step() +
theme_classic()
df_age_ratio <- #creates a df that counts from 0 to 1, and with blank columns for TotalValue & PercValue
data.frame("Ratio" =seq(0, 1, .01), "TotalValue" = NA, "PercValue" = NA)
for (i in 1:nrow(df_age_ratio)) {#for loop fills in TotalValue column
Ratio_Value <- df_age_ratio$Ratio[i]
ratio_hold <- sum(Ratio_Value <= seedlings_clean_joined$RatioTimeAlive, na.rm = TRUE)
df_age_ratio$TotalValue[i] <- as.numeric(ratio_hold)
}
df_age_ratio_perc <- df_age_ratio%>%
mutate(TotalValue = as.numeric(TotalValue))%>%
mutate(PercValue = TotalValue/max(TotalValue, na.rm = TRUE))
#I used this figure for my RaMP presentation
df_age_ratio %>% #curve shown with y = raw values
ggplot()+
geom_step(aes(x = Ratio, y = TotalValue)) +
ylim(0, 2000) +
xlab('Realized time alive / Potential time alive') +
ylab('# of individuals') +
ggtitle("Rate of death over time in outplanted seedlings:") +
theme_classic()
df_age_ratio_perc %>% #curve shown with y = percentage
ggplot() +
geom_step(aes(x = Ratio, y = PercValue)) +
ylim(0, 1) +
xlab('Realized time alive / Potential time alive') +
ylab('% of individuals') +
ggtitle("seedlings_clean_joined: %") +
theme_classic()
#Example of a function that prints "a b"
test_function <- function(sequence, fill_in){
temp <- paste(sequence, fill_in)
#return(temp)
}
test_function("a", "b")
#these are the age classes I want to define
seedlings_clean_M1 <- seedlings_clean_joined%>% #planted before M1
filter(DatePlanted < '2022-02-13')
seedlings_clean_M2 <- seedlings_clean_joined%>% #planted between M1 & M2
filter(DatePlanted < '2023-01-20', DatePlanted > '2022-02-13')
seedlings_clean_M3 <- seedlings_clean_joined%>% #planted between M2 & M3
filter(DatePlanted < '2023-12-13', DatePlanted > '2023-01-20')
#there have been seedlings planted between M3 and M4, but they have not been remonitored for M4 yet
seedlings_clean_M4 <- seedlings_clean_joined%>% #planted between M3 and M4
filter(DatePlanted < '2024-11-23', DatePlanted > '2023-12-13')
#creates a blank loop that can be repeated for each age class(M1, M2, etc)
loop_function <- function(source, CustomSequence, fill_in){
df <- data.frame("Ratio" = CustomSequence, fill_in = NA, "PercValue" = NA)
names(df)[2] <- c(fill_in) #overwrites the column title
for (i in 1:nrow(df)) {
Ratio_Value <- df$Ratio[i]
ratio_hold <- sum(Ratio_Value <= source$RatioTimeAlive, na.rm = TRUE)
df[i,2] <-as.numeric(ratio_hold) #saves value to the i row in the 2nd column
}
return(df) #this is the part of the for loop we want back as results
}
#these are the age classes I want to repeat the for loop on
#also converts TotalValue into PercValue and fills an additional column
M1_age <- loop_function(seedlings_clean_M1, seq(0, 1, .01), "TotalValue")%>%
mutate(TotalValue = as.numeric(TotalValue))%>%
mutate(PercValue = TotalValue/max(TotalValue, na.rm = TRUE))
M2_age <- loop_function(seedlings_clean_M2, seq(0, 1, .01), "TotalValue")%>%
mutate(TotalValue = as.numeric(TotalValue))%>%
mutate(PercValue = TotalValue/max(TotalValue, na.rm = TRUE))
M3_age <- loop_function(seedlings_clean_M3, seq(0, 1, .01), "TotalValue")%>%
mutate(TotalValue = as.numeric(TotalValue))%>%
mutate(PercValue = TotalValue/max(TotalValue, na.rm = TRUE))
M4_age <- loop_function(seedlings_clean_M4, seq(0, 1, .01), "TotalValue")%>%
mutate(TotalValue = as.numeric(TotalValue))%>%
mutate(PercValue = TotalValue/max(TotalValue, na.rm = TRUE))
#Scatter plot: Height & Condition
outplanted_seedlings_nov24%>%
filter(!str_detect(Height_cm, "N/A"))%>%
ggplot() +
ggtitle("Height & Condition") +
geom_point(aes(x = Height_cm, y = Condition_num)) +
#  xlim(0, 350) +
#  ylim(0, 1) +
xlab("Height (cm)") +
ylab("Condition") +
theme_classic()
#Box plot: Height & Condition
outplanted_seedlings_nov24%>%
mutate(Condition_num = as.factor(Condition_num))%>%
filter(!str_detect(Height_cm, "N/A"))%>%
ggplot() +
ggtitle("Height & Condition") +
geom_boxplot(aes(x = Condition_num, y = Height_cm), outlier.shape = NA) +
geom_jitter(aes(x = Condition_num, y = Height_cm)) +
xlab("Condition") +
ylab("Height (cm)") +
theme_classic()
#Box plot: Height & Ranch
outplanted_seedlings_nov24%>%
mutate(Ranch=recode(Ranch, 'La Rueda (Palapa)' = 'La Rueda'))%>% #combines the two Ranches that are both at La Rueda
filter(!str_detect(Height_cm, "N/A"))%>%
ggplot() +
ggtitle("Height & Ranch") +
geom_boxplot(aes(x = Ranch, y = Height_cm, fill = Region)) +
geom_jitter(aes(x = Ranch, y = Height_cm)) +
facet_wrap(~Region, dir = "h") +
#ylim(0, 350) +
xlab("Ranch") +
ylab("Height (cm)") +
theme_classic() +
theme(axis.text.x = element_text(angle = 90))
####SURVIVORSHIP BY AGE CLASS####
#displays the survivorship curve for each age class (M1, M2, M3 & M4)
#y = raw numbers
M1_age %>% #planted between 06/22/21 and 02/13/22: 236 days
ggplot() +
ggtitle("M1") +
geom_step(aes(x = Ratio, y = TotalValue)) +
xlim(0, 1) +
ylim(0, 510) +
geom_vline(xintercept = 100/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #100 days
geom_text(label="100 days", x=(100/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=500) +
geom_vline(xintercept = 200/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #200 days
geom_text(label="200 days", x=(200/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=450) +
geom_vline(xintercept = 300/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #300 days
geom_text(label="300 days", x=(300/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=500) +
geom_vline(xintercept = 400/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #400 days
geom_text(label="400 days", x=(400/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=450) +
geom_vline(xintercept = 500/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #500 days
geom_text(label="500 days", x=(500/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=500) +
geom_vline(xintercept = 600/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #600 days
geom_text(label="600 days", x=(600/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=450) +
geom_vline(xintercept = 700/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #700 days
geom_text(label="700 days", x=(700/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=500) +
geom_vline(xintercept = 800/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #800 days
geom_text(label="800 days", x=(800/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=450) +
geom_vline(xintercept = 900/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #900 days
geom_text(label="900 days", x=(900/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=500) +
geom_vline(xintercept = 1000/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #1000 days
geom_text(label="1000 days", x=(1000/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=450) +
geom_vline(xintercept = 1100/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #1100 days
geom_text(label="1100 days", x=(1100/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=500) +
geom_vline(xintercept = 1200/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #1200 days
geom_text(label="1200 days", x=(1200/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=450) +
theme_classic()
#y = percent
M1_age %>%
ggplot() +
ggtitle("M1") +
geom_step(aes(x = Ratio, y = PercValue)) +
ylim(0, 1) +
geom_vline(xintercept = 100/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #100 days
geom_text(label="100 days", x=(100/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=1) +
geom_vline(xintercept = 200/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #200 days
geom_text(label="200 days", x=(200/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=0.8) +
geom_vline(xintercept = 300/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #300 days
geom_text(label="300 days", x=(300/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=1) +
geom_vline(xintercept = 400/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #400 days
geom_text(label="400 days", x=(400/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=0.8) +
geom_vline(xintercept = 500/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #500 days
geom_text(label="500 days", x=(500/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=1) +
geom_vline(xintercept = 600/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #600 days
geom_text(label="600 days", x=(600/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=0.8) +
geom_vline(xintercept = 700/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #700 days
geom_text(label="700 days", x=(700/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=1) +
geom_vline(xintercept = 800/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #800 days
geom_text(label="800 days", x=(800/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=0.8) +
geom_vline(xintercept = 900/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #900 days
geom_text(label="900 days", x=(900/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=1) +
geom_vline(xintercept = 1000/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #1000 days
geom_text(label="1000 days", x=(1000/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=0.8) +
geom_vline(xintercept = 1100/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #1100 days
geom_text(label="1100 days", x=(1100/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=1) +
geom_vline(xintercept = 1200/as.numeric(max(seedlings_clean_M1$TimeAlive)), linetype="dashed") + #1200 days
geom_text(label="1200 days", x=(1200/as.numeric(max(seedlings_clean_M1$TimeAlive))), y=0.8) +
theme_classic()
####INTERVAL REGRESSION####
# bivariate plots
outplanted_seedlings_nov24%>%
mutate(Height_lower=as.numeric(Height_lower))%>%
mutate(Height_upper=as.numeric(Height_upper))%>%
dplyr::select(c(Height_upper, Height_lower, Condition_num, Canopy_num, Region))%>%
ggpairs(., lower = list(combo = "box"), upper = list(combo = "blank"))
outplanted_seedlings_nov24_aov <- outplanted_seedlings_nov24%>%
filter(!is.na(TimeAliveNum))%>%
mutate(Ranch=recode(Ranch, 'La Rueda (Palapa)' = 'La Rueda'))%>%
mutate(Height_lower=as.numeric(Height_lower))%>%
mutate(Height_upper=as.numeric(Height_upper))%>%
mutate(Height_lower_standardized=Height_lower/TimeAliveNum)%>%
mutate(Height_upper_standardized=Height_upper/TimeAliveNum)%>%
mutate(Canopy_num = as.factor(Canopy_num))%>%
#mutate(Condition_num = as.factor(Condition_num))%>%
mutate(Ranch = as.factor(Ranch))%>%
mutate(Region = as.factor(Region))%>%
dplyr::select(c(Height_upper_standardized, Height_lower_standardized, Canopy_num, Ranch, Region))
ggpairs(outplanted_seedlings_nov24_aov, lower = list(combo = "box"), upper = list(combo = "blank"))
summary(aov(data=outplanted_seedlings_nov24_aov, Height_upper_standardized ~ Canopy_num + Ranch + Region))
summary(aov(data=outplanted_seedlings_nov24_aov, Height_lower_standardized ~ Canopy_num + Ranch + Region))
# analysis of deviance table
anova(m)
outplanted_seedlings_nov24%>%
filter(!is.na(Canopy_num))%>%
mutate(Ranch=recode(Ranch, 'La Rueda (Palapa)' = 'La Rueda'))%>%
ggplot(., aes(x = Condition_num, y = as.numeric(Canopy_num))) +
geom_boxplot(size = .75) +
geom_jitter(alpha = .5) +
facet_grid(~Ranch, margins = TRUE) +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1))
class(outplanted_seedlings_nov24$Condition_num)
## fit ordered logit model and store results 'r'
r <- polr(Condition_num ~ Canopy_num + Ranch, data = outplanted_seedlings_nov24, Hess=TRUE)
## view a summary of the model
summary(r)
## store table
(ctable <- coef(summary(r)))
## calculate and store p values
p <- pnorm(abs(ctable[, "t value"]), lower.tail = FALSE) * 2
## combined table
(ctable <- cbind(ctable, "p value" = p))
(ci <- confint(r)) # default method gives profiled CIs
confint.default(r) # CIs assuming normality
## odds ratios: how much more likely is this thing than anything else?
exp(coef(r))
## OR and CI
exp(cbind(OR = coef(r), ci))
#checking assumption that relationship between each pair of outcome groups (condition bins) is the same
brant(r)
View(outplanted_seedlings_nov24)
View(outplanted_seedlings_nov24_aov)
outplanted_seedlings_nov24_aov <- outplanted_seedlings_nov24%>%
filter(!is.na(TimeAliveNum))%>%
mutate(Ranch=recode(Ranch, 'La Rueda (Palapa)' = 'La Rueda'))%>%
mutate(Height_lower=as.numeric(Height_lower))%>%
mutate(Height_upper=as.numeric(Height_upper))%>%
mutate(Height_lower_standardized=Height_lower/TimeAliveNum)%>%
mutate(Height_upper_standardized=Height_upper/TimeAliveNum)%>%
mutate(Canopy_num = as.factor(Canopy_num))%>%
#mutate(Condition_num = as.factor(Condition_num))%>%
mutate(Ranch = as.factor(Ranch))%>%
mutate(Region = as.factor(Region))%>%
dplyr::select(c(Height_upper_standardized, Height_lower_standardized, Canopy_num, Condition_num, Ranch, Region))
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Canopy vs Height (upper)") +
ylim(0,1) +
geom_boxplot(aes(x = Canopy_num, y = Height_upper_standardized)) +
geom_jitter(aes(x = Canopy_num, y = Height_upper_standardized)) +
theme_classic()
#Canopy vs Height (lower)
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Canopy vs Height (lower)") +
ylim(0,1) +
geom_boxplot(aes(x = Canopy_num, y = Height_lower_standardized)) +
geom_jitter(aes(x = Canopy_num, y = Height_lower_standardized)) +
theme_classic()
#Condition vs Height (upper)
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Condition vs Height (upper)") +
ylim(0,1) +
geom_boxplot(aes(x = Condition_num, y = Height_upper_standardized)) +
geom_jitter(aes(x = Condition_num, y = Height_upper_standardized)) +
theme_classic()
#Condition vs Height (lower)
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Condition vs Height (lower)") +
ylim(0,1) +
geom_boxplot(aes(x = Condition_num, y = Height_lower_standardized)) +
geom_jitter(aes(x = Condition_num, y = Height_lower_standardized)) +
theme_classic()
#Ranch vs Condition
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Ranch vs Condition") +
#ylim(0,1) +
geom_boxplot(aes(x = Ranch, y = Condition_num)) +
geom_jitter(aes(x = Ranch, y = Condition_num)) +
theme_classic()
#Ranch vs Condition
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Ranch vs Condition") +
#ylim(0,1) +
geom_boxplot(aes(x = Ranch, y = Condition_num)) +
geom_jitter(aes(x = Ranch, y = Condition_num)) +
theme_classic() +
theme(axis.text.x = element_text(angle = 90))
#Ranch vs Condition
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Ranch vs Condition") +
#ylim(0,1) +
geom_boxplot(aes(x = Ranch, y = Condition_num)) +
geom_jitter(aes(x = Ranch, y = Condition_num)) +
theme_classic() +
theme(axis.text.x = element_text(angle = 45))
#Ranch vs Condition
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Ranch vs Condition") +
#ylim(0,1) +
geom_boxplot(aes(x = Ranch, y = Condition_num)) +
geom_jitter(aes(x = Ranch, y = Condition_num)) +
theme_classic() +
theme(axis.text.x = element_text(angle = 45, vjust = 1))
#Ranch vs Condition
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Ranch vs Condition") +
#ylim(0,1) +
geom_boxplot(aes(x = Ranch, y = Condition_num)) +
geom_jitter(aes(x = Ranch, y = Condition_num)) +
theme_classic() +
theme(axis.text.x = element_text(angle = 45,
hjust = 1, vjust = 1))
#Ranch vs Height (lower)
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Ranch vs Height (lower)") +
ylim(0,1) +
geom_boxplot(aes(x = Ranch, y = Height_lower_standardized)) +
geom_jitter(aes(x = Ranch, y = Height_lower_standardized)) +
theme_classic()
#Ranch vs Height (lower)
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Ranch vs Height (lower)") +
ylim(0,1) +
geom_boxplot(aes(x = Ranch, y = Height_lower_standardized)) +
geom_jitter(aes(x = Ranch, y = Height_lower_standardized)) +
theme_classic() +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1))
#Ranch vs Height (upper)
outplanted_seedlings_nov24_aov%>%
ggplot() +
ggtitle("Ranch vs Height (upper)") +
ylim(0,1) +
geom_boxplot(aes(x = Ranch, y = Height_upper_standardized)) +
geom_jitter(aes(x = Ranch, y = Height_upper_standardized)) +
theme_classic() +
theme(axis.text.x = element_text(angle = 45, hjust = 1, vjust = 1))
